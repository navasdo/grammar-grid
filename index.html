<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grammar Grid</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }
        .shake {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
            transform: translate3d(0, 0, 0);
        }
        .word-box {
            cursor: pointer;
            user-select: none;
            transition: transform 0.2s, background-color 0.2s;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- Icon Components ---
        const IconSpinner = ({ className }) => (
          <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
            <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
        );
        
        const IconFullscreenEnter = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/></svg>
        );

        const IconFullscreenExit = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"/></svg>
        );
        
        const IconCheck = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        );
        
        const IconReset = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21.5 2v6h-6"/><path d="M2.5 22v-6h6"/><path d="M22 11.5A10 10 0 0 0 12.5 3a9.99 9.99 0 0 0-6.2 2.3L2.5 9"/><path d="M2 12.5A10 10 0 0 0 11.5 21a9.99 9.99 0 0 0 6.2-2.3L21.5 15"/></svg>
        );

        // Helper function to convert PCM audio to WAV format
        const pcmToWav = (pcmData, sampleRate) => {
            const numChannels = 1;
            const bytesPerSample = 2;
            const blockAlign = numChannels * bytesPerSample;
            const byteRate = sampleRate * blockAlign;
            const dataSize = pcmData.length * bytesPerSample;
            const buffer = new ArrayBuffer(44 + dataSize);
            const view = new DataView(buffer);

            // RIFF chunk descriptor
            writeString(view, 0, 'RIFF');
            view.setUint32(4, 36 + dataSize, true);
            writeString(view, 8, 'WAVE');

            // fmt chunk
            writeString(view, 12, 'fmt ');
            view.setUint32(16, 16, true);
            view.setUint16(20, 1, true); // PCM format
            view.setUint16(22, numChannels, true);
            view.setUint32(24, sampleRate, true);
            view.setUint32(28, byteRate, true);
            view.setUint16(32, blockAlign, true);
            view.setUint16(34, 16, true); // bits per sample

            // data chunk
            writeString(view, 36, 'data');
            view.setUint32(40, dataSize, true);
            
            // Write PCM data
            for (let i = 0; i < pcmData.length; i++) {
                view.setInt16(44 + i * bytesPerSample, pcmData[i], true);
            }

            return new Blob([view], { type: 'audio/wav' });
        };
        
        const writeString = (view, offset, string) => {
            for (let i = 0; i < string.length; i++) {
                view.setUint8(offset + i, string.charCodeAt(i));
            }
        };

        // --- Main App Component ---
        function App() {
          const [screen, setScreen] = useState('setup'); // 'setup', 'app', 'results'
          const [isLoading, setIsLoading] = useState(false);
          const [error, setError] = useState(null);
          const [isFullscreen, setIsFullscreen] = useState(false);
          
          const toggleFullscreen = () => {
            if (!document.fullscreenElement) {
              document.documentElement.requestFullscreen().catch(err => {
                setError("Fullscreen mode is not permitted in this view.");
              });
            } else {
              if (document.exitFullscreen) {
                document.exitFullscreen();
              }
            }
          };

          useEffect(() => {
            const handleFullscreenChange = () => {
              setIsFullscreen(!!document.fullscreenElement);
            };
            document.addEventListener('fullscreenchange', handleFullscreenChange);
            return () => document.removeEventListener('fullscreenchange', handleFullscreenChange);
          }, []);
          
          useEffect(() => {
            if (error) {
                const timeoutId = setTimeout(() => setError(null), 5000);
                return () => clearTimeout(timeoutId);
            }
          }, [error]);
          
          // Placeholder functions
          const handleStart = () => setScreen('app');
          const handleSubmit = () => setScreen('results');
          const handleRestart = () => setScreen('setup');

          const renderScreen = () => {
            switch (screen) {
              case 'app':
                return <MainAppScreen onSubmit={handleSubmit} />;
              case 'results':
                return <ResultsScreen onRestart={handleRestart} />;
              case 'assessmentSetup':
                return <AssessmentSetupScreen onStartAssessment={handleStart} />;
              case 'setup':
              default:
                return <TutorialScreen onStartAssessment={() => setScreen('assessmentSetup')} isLoading={isLoading} />;
            }
          };

          return (
            <div className="bg-[#5B4B62] min-h-screen font-sans text-[#dee2e6] relative">
              <button 
                onClick={toggleFullscreen}
                className="absolute top-4 left-4 z-10 p-2 rounded-full bg-[#8B87A1]/50 hover:bg-[#C3B1E1] transition text-[#dee2e6]"
                title={isFullscreen ? "Exit Fullscreen" : "Enter Fullscreen"}
              >
                {isFullscreen ? <IconFullscreenExit /> : <IconFullscreenEnter />}
              </button>
               <a href="/" className="absolute top-4 right-4 z-10 p-1 rounded-full bg-[#8B87A1]/50 hover:bg-[#C3B1E1] transition" title="Back to Homepage">
                    <img src="https://raw.githubusercontent.com/navasdo/oliver/main/navacite/gems/Navacite-Main.png" alt="Navacite Homepage" className="w-10 h-10 rounded-full"/>
                </a>
              <div className="container mx-auto p-4 sm:p-6 lg:p-8">
                <header className="text-center mb-8">
                  <img 
                    src="https://raw.githubusercontent.com/navasdo/grammar-grid/refs/heads/main/navacite-gg.png" 
                    alt="App Gem" 
                    className="w-48 mx-auto mb-4 drop-shadow-[0_0_15px_rgba(255,255,255,0.7)]"
                  />
                  <h1 className="text-4xl font-bold text-[7F00FF]">Grammar Grid</h1>
                  <p className="text-sm text-[#aea2a6] italic mt-2">Concept by Daniel Navas, M.A., CCC-SLP & Coded in Tandem with Google Gemini</p>
                </header>
                {error && <div className="text-red-400 bg-red-900/50 p-3 rounded-lg text-center my-4 max-w-4xl mx-auto">{error}</div>}
                <main className="bg-[#8B87A1]/50 p-6 sm:p-8 rounded-2xl shadow-lg max-w-4xl mx-auto border border-[#AEA2A6]">
                  {renderScreen()}
                </main>
              </div>
            </div>
          );
        }

        // --- Tutorial Screen ---
        const TutorialScreen = ({ onStartAssessment, isLoading }) => {
          const [words, setWords] = useState([
            { id: 1, text: "tasty", inSentence: false },
            { id: 2, text: "the ice cream", inSentence: false },
            { id: 3, text: "is", inSentence: false }
          ]);
          const [sentence, setSentence] = useState([]);
          const [sentencesCompleted, setSentencesCompleted] = useState(0);
          const [shake, setShake] = useState(false);
          const [showPopup, setShowPopup] = useState(true);
          const [isLoadingAudio, setIsLoadingAudio] = useState(false);
          const [audioTutorial, setAudioTutorial] = useState(null);
          const [audioStatement, setAudioStatement] = useState(null);
          const [audioQuestion, setAudioQuestion] = useState(null);
          const [audioFinished, setAudioFinished] = useState(null);
          const audioRef = useRef(new Audio());

          const correctSentences = [
            ["the ice cream", "is", "tasty"],
            ["is", "the ice cream", "tasty"]
          ];
          
          const sentenceString = sentence.map(w => w.text).join(' ');
          const formattedSentences = sentence.map((word, index) => (
            <span 
              key={index} 
              className="px-3 py-2 bg-[#AEA2A6]/50 text-[#5B4B62] rounded-lg cursor-default shadow-sm font-semibold"
            >
              {word.text}
            </span>
          ));

          const getScoreColor = () => {
            if (sentencesCompleted === 2) return 'text-green-500';
            if (sentencesCompleted === 1) return 'text-orange-400';
            return 'text-gray-400';
          };
          
          const getRemainingWords = () => words.filter(w => !w.inSentence);

          const handleWordClick = (wordId) => {
            const word = words.find(w => w.id === wordId);
            if (word && !word.inSentence) {
                setSentence(prev => [...prev, word]);
                setWords(prev => prev.map(w => w.id === wordId ? { ...w, inSentence: true } : w));
            }
          };

          const handleCheck = () => {
            if (sentence.length === 0) return;
            const currentSentence = sentence.map(w => w.text).join(' ');
            
            const isCorrect = correctSentences.some(correct => correct.join(' ') === currentSentence);

            if (isCorrect) {
              setSentencesCompleted(prev => prev + 1);
              if (sentencesCompleted === 0) {
                // First correct sentence
                if (currentSentence === "the ice cream is tasty") {
                  audioRef.current.src = audioStatement;
                  audioRef.current.play();
                } else {
                  audioRef.current.src = audioQuestion;
                  audioRef.current.play();
                }
                handleReset(); // Words return to the bank
              } else {
                // Second correct sentence
                audioRef.current.src = audioFinished;
                audioRef.current.play();
                setTimeout(() => {
                    onStartAssessment();
                }, 4000); 
              }
            } else {
              // Incorrect, shake and reset
              setShake(true);
              setTimeout(() => {
                setShake(false);
                handleReset();
              }, 1000);
            }
          };

          const handleReset = () => {
            setSentence([]);
            setWords(words.map(w => ({ ...w, inSentence: false })));
          };

          const handlePass = () => {
              setSentencesCompleted(0);
              // In a full app, this would finalize the score for this question and move to the next.
              // For the tutorial, we just reset.
              handleReset();
          };

          const generateAndPlayAudio = async (text, setter) => {
            setIsLoadingAudio(true);
            const payload = {
              contents: [{ parts: [{ text: text }] }],
              generationConfig: {
                responseModalities: ["AUDIO"],
                speechConfig: {
                  voiceConfig: {
                    prebuiltVoiceConfig: { voiceName: "Kore" }
                  }
                }
              },
              model: "gemini-2.5-flash-preview-tts"
            };
            const apiKey = "AIzaSyCmgouHfiXaHHK4f7FVNQ9hke2ujQ8YDRg";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent?key=${apiKey}`;

            try {
              const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
              });
              const result = await response.json();
              const part = result?.candidates?.[0]?.content?.parts?.[0];
              const audioData = part?.inlineData?.data;
              const mimeType = part?.inlineData?.mimeType;

              if (audioData && mimeType && mimeType.startsWith("audio/")) {
                const sampleRate = parseInt(mimeType.match(/rate=(\d+)/)[1], 10);
                const pcmData = Uint8Array.from(atob(audioData), c => c.charCodeAt(0)).buffer;
                const pcm16 = new Int16Array(pcmData);
                const wavBlob = pcmToWav(pcm16, sampleRate);
                const audioUrl = URL.createObjectURL(wavBlob);
                setter(audioUrl);
              }
            } catch (e) {
              console.error("Audio generation failed:", e);
            } finally {
              setIsLoadingAudio(false);
            }
          };

          useEffect(() => {
            generateAndPlayAudio("Here are some words that can be made into two different sentences.  Click or drag them to the text area above to create a sentence, and I'll let you know if you're correct!", setAudioTutorial);
            generateAndPlayAudio("You're right. That sentence tells me something.  Can you try another sentence that's asking me something?", setAudioStatement);
            generateAndPlayAudio("You're right, that sentence asks me something.  Can you try telling me something?", setAudioQuestion);
            generateAndPlayAudio("you've got it!  Now let’s do some more. For each question, you will make two sentences using the words given to you.  Both sentences have to be a complete thought that sounds right. Good luck!", setAudioFinished);
          }, []);

          // --- DATE LOGIC ---
          const currentDate = new Date().toLocaleDateString('en-US', {
            weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
          });

          return (
            <div className="space-y-8">
              {/* Audio and Loading */}
              {isLoadingAudio && (
                <div className="absolute inset-0 bg-black/50 flex items-center justify-center z-50">
                  <IconSpinner className="animate-spin w-12 h-12 text-[#DA70D6]" />
                </div>
              )}

              {/* Popup Modal */}
              {showPopup && (
                <div className="absolute inset-0 bg-black/50 flex items-center justify-center z-40">
                  <div className="bg-[#5B4B62] p-8 rounded-2xl shadow-lg border border-[#AEA2A6] text-center max-w-sm">
                    <p className="font-bold text-lg mb-4">Begin with tutorial?</p>
                    <div className="flex justify-center space-x-4">
                      <button 
                        onClick={() => { 
                          setShowPopup(false);
                          if (audioTutorial) { audioRef.current.src = audioTutorial; audioRef.current.play(); }
                        }} 
                        className="px-6 py-2 bg-[#DA70D6] rounded-lg font-semibold hover:bg-[#C3B1E1] transition"
                      >
                        Yes
                      </button>
                      <button 
                        onClick={() => { setShowPopup(false); onStartAssessment(); }} 
                        className="px-6 py-2 bg-[#DA70D6] rounded-lg font-semibold hover:bg-[#C3B1E1] transition"
                      >
                        No
                      </button>
                    </div>
                  </div>
                </div>
              )}

              {/* Date Display */}
              <div className="text-center p-3 bg-[#8B87A1]/50 text-[#C3B1E1] rounded-lg">
                <p className="font-semibold">{currentDate}</p>
              </div>
              
              <div className="text-center">
                 <h2 className="text-2xl font-bold text-[#dee2e6]">Tutorial</h2>
              </div>

              {/* Sentence construction area */}
              <div className={`p-4 min-h-[6rem] border border-dashed border-[#AEA2A6] rounded-lg flex flex-wrap items-center justify-center gap-2 transition-all duration-300 ${shake ? 'shake' : ''}`}>
                {sentence.length > 0 ? formattedSentences : <span className="text-sm text-[#aea2a6] italic">Click words below to build your sentence...</span>}
              </div>

              {/* Word bank */}
              <div className="p-4 rounded-lg flex flex-wrap justify-center gap-2 bg-[#8B87A1]/50">
                {getRemainingWords().map(word => (
                  <button
                    key={word.id}
                    onClick={() => handleWordClick(word.id)}
                    className="word-box px-4 py-2 bg-[#AEA2A6]/50 text-[#dee2e6] rounded-lg shadow-sm font-semibold"
                  >
                    {word.text}
                  </button>
                ))}
              </div>

              {/* Action buttons and score */}
              <div className="flex items-center justify-center space-x-4 mt-8">
                <button onClick={handleCheck} className="p-4 bg-[#DA70D6] rounded-full text-white hover:bg-[#C3B1E1] transition-transform transform hover:scale-105">
                  <IconCheck />
                </button>
                <div className="flex flex-col items-center">
                  <span className={`text-xl font-bold ${getScoreColor()}`}>
                    {sentencesCompleted}/2
                  </span>
                  <p className="text-sm text-[#aea2a6] italic">Score</p>
                </div>
                <button onClick={handleReset} className="p-4 bg-[#DA70D6] rounded-full text-white hover:bg-[#C3B1E1] transition-transform transform hover:scale-105">
                  <IconReset />
                </button>
                <button onClick={handlePass} className="px-6 py-4 bg-[#DA70D6] rounded-lg text-white font-bold hover:bg-[#C3B1E1] transition">
                  Pass
                </button>
              </div>

            </div>
          );
        };

        // --- Assessment Setup Screen ---
        const AssessmentSetupScreen = ({ onStartAssessment }) => {
          const [examinerName, setExaminerName] = useState('');
          const [gradeLevel, setGradeLevel] = useState('1');
          const [numQuestions, setNumQuestions] = useState(10);
          const [isMultiGrade, setIsMultiGrade] = useState(false);
          const [highQuestions, setHighQuestions] = useState(0);
          const [mediumQuestions, setMediumQuestions] = useState(10);
          const [lowQuestions, setLowQuestions] = useState(0);
          
          const totalQuestions = parseInt(highQuestions) + parseInt(mediumQuestions) + parseInt(lowQuestions);
          const questionsLeft = 10 - totalQuestions;

          return (
            <div className="space-y-8">
                <div className="text-center p-3 bg-[#8B87A1]/50 text-[#C3B1E1] rounded-lg">
                  <p className="font-semibold">{new Date().toLocaleDateString('en-US', {
                      weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
                    })}</p>
                </div>
                <h2 className="text-2xl font-bold text-center">Assessment Setup</h2>
                
                {/* Student Name Input (Disabled for FERPA) */}
                <div className="flex flex-col space-y-2">
                  <label htmlFor="student-name" className="text-lg font-semibold">Student Name</label>
                  <input
                    id="student-name"
                    type="text"
                    disabled
                    value="To comply with FERPA, no student name should be entered into this application. This line is visible so you may manually type in their name on the exported .pdf file."
                    className="p-3 rounded-lg bg-[#AEA2A6]/30 text-[#6B7280] border border-[#AEA2A6] focus:outline-none focus:ring-2 focus:ring-[#C3B1E1]"
                  />
                </div>

                {/* Examiner Input */}
                <div className="flex flex-col space-y-2">
                  <label htmlFor="examiner" className="text-lg font-semibold">Examiner Name</label>
                  <input
                    id="examiner"
                    type="text"
                    value={examinerName}
                    onChange={(e) => setExaminerName(e.target.value)}
                    className="p-3 rounded-lg bg-[#AEA2A6]/30 text-[#dee2e6] border border-[#AEA2A6] focus:outline-none focus:ring-2 focus:ring-[#C3B1E1]"
                    placeholder="Enter examiner's name"
                  />
                </div>

                {/* Single Grade Level Setup */}
                <div className="flex flex-col space-y-2">
                  <label htmlFor="grade-level" className="text-lg font-semibold">Grade Level</label>
                  <select
                    id="grade-level"
                    value={gradeLevel}
                    onChange={(e) => setGradeLevel(e.target.value)}
                    className="p-3 rounded-lg bg-[#AEA2A6]/30 text-[#dee2e6] border border-[#AEA2A6] focus:outline-none focus:ring-2 focus:ring-[#C3B1E1]"
                  >
                    {[...Array(12)].map((_, i) => (
                      <option key={i} value={i + 1}>Grade {i + 1}</option>
                    ))}
                  </select>
                </div>
                
                <div className="flex items-center space-x-2">
                  <input
                    id="multi-grade"
                    type="checkbox"
                    checked={isMultiGrade}
                    onChange={(e) => setIsMultiGrade(e.target.checked)}
                    className="w-5 h-5 accent-[#DA70D6] rounded"
                  />
                  <label htmlFor="multi-grade" className="text-lg font-semibold">Select multiple grade levels</label>
                </div>

                {/* Multiple Grade Level Setup */}
                {isMultiGrade ? (
                  <div className="bg-[#8B87A1]/40 p-6 rounded-lg space-y-4">
                    <h3 className="text-xl font-semibold text-[#dee2e6]">Questions by Grade Level</h3>
                    <div className="flex flex-col space-y-2">
                      <label htmlFor="low-q" className="font-medium">Low Questions (Questions Left: {questionsLeft})</label>
                      <input
                        id="low-q"
                        type="number"
                        value={lowQuestions}
                        onChange={(e) => setLowQuestions(Math.min(e.target.value, 10 - (parseInt(highQuestions) + parseInt(mediumQuestions))))}
                        className="p-2 rounded-lg bg-[#AEA2A6]/30 text-[#dee2e6] border border-[#AEA2A6] focus:outline-none focus:ring-2 focus:ring-[#C3B1E1]"
                        max={10 - (parseInt(highQuestions) + parseInt(mediumQuestions))}
                      />
                    </div>
                    <div className="flex flex-col space-y-2">
                      <label htmlFor="medium-q" className="font-medium">Medium Questions</label>
                      <input
                        id="medium-q"
                        type="number"
                        value={mediumQuestions}
                        onChange={(e) => setMediumQuestions(Math.min(e.target.value, 10 - (parseInt(highQuestions) + parseInt(lowQuestions))))}
                        className="p-2 rounded-lg bg-[#AEA2A6]/30 text-[#dee2e6] border border-[#AEA2A6] focus:outline-none focus:ring-2 focus:ring-[#C3B1E1]"
                        max={10 - (parseInt(highQuestions) + parseInt(lowQuestions))}
                      />
                    </div>
                    <div className="flex flex-col space-y-2">
                      <label htmlFor="high-q" className="font-medium">High Questions</label>
                      <input
                        id="high-q"
                        type="number"
                        value={highQuestions}
                        onChange={(e) => setHighQuestions(Math.min(e.target.value, 10 - (parseInt(lowQuestions) + parseInt(mediumQuestions))))}
                        className="p-2 rounded-lg bg-[#AEA2A6]/30 text-[#dee2e6] border border-[#AEA2A6] focus:outline-none focus:ring-2 focus:ring-[#C3B1E1]"
                        max={10 - (parseInt(lowQuestions) + parseInt(mediumQuestions))}
                      />
                    </div>
                    <p className={`text-sm font-semibold ${questionsLeft < 0 ? 'text-red-400' : 'text-[#dee2e6]'}`}>Total Questions: {totalQuestions}/10</p>
                  </div>
                ) : (
                  <div className="flex flex-col space-y-2">
                    <label htmlFor="num-questions" className="text-lg font-semibold">Number of Questions (max 10)</label>
                    <input
                      id="num-questions"
                      type="number"
                      value={numQuestions}
                      onChange={(e) => setNumQuestions(Math.min(e.target.value, 10))}
                      min="1"
                      max="10"
                      className="p-3 rounded-lg bg-[#AEA2A6]/30 text-[#dee2e6] border border-[#AEA2A6] focus:outline-none focus:ring-2 focus:ring-[#C3B1E1]"
                    />
                  </div>
                )}
                
                <button
                  onClick={onStartAssessment}
                  disabled={isMultiGrade && totalQuestions > 10}
                  className={`w-full py-4 bg-[#DA70D6] rounded-lg font-bold text-lg hover:bg-[#C3B1E1] transition-transform transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed`}
                >
                  Start Assessment
                </button>
            </div>
          );
        };

        // --- Other Screen Components (placeholders) ---
        const MainAppScreen = ({ onSubmit }) => {
          return (
            <div className="space-y-8 text-center">
              <h2 className="text-2xl font-semibold text-[#dee2e6]">Main Application Screen</h2>
              <p className="text-[#AEA2A6]">This is where the main task of your app will happen. The app will proceed to this screen after the tutorial.</p>
              <button onClick={onSubmit} className="w-full md:w-auto px-12 py-4 bg-[#DA70D6] text-white font-bold text-lg rounded-lg shadow-md hover:bg-[#C3B1E1] focus:outline-none focus:ring-4 focus:ring-[#C3B1E1] transition-transform transform hover:scale-105">
                Submit
              </button>
            </div>
          );
        };
        
        const ResultsScreen = ({ onRestart }) => {
          return (
            <div className="space-y-8 text-center">
              <h2 className="text-2xl font-semibold text-[#dee2e6]">Results Screen</h2>
              <p className="text-[#AEA2A6]">This is where you'll display scores, reports, and provide options to export data or start over.</p>
               <button onClick={onRestart} className="w-full md:w-auto px-12 py-4 bg-[#DA70D6] text-white font-bold text-lg rounded-lg shadow-md hover:bg-[#C3B1E1] focus:outline-none focus:ring-4 focus:ring-[#C3B1E1] transition-transform transform hover:scale-105">
                 Start New
               </button>
            </div>
          );
        };

        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);
    </script>
</body>
</html>
